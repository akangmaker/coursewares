<!doctype html><html><head><meta charset=UTF-8><title>分治&amp;高效排序算法 - By 重庆市育才中学校 赵康</title><link rel=stylesheet href=//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism-okaidia.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.5.1/katex.min.css><link href=./css/chunk-vendors.e4a15973.css rel=stylesheet></head><body><div><article id=webslides><section slide class="slide bg-black-blue aligncenter" image="https://source.unsplash.com/C1HhAQrbykQ/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/C1HhAQrbykQ/')"></span><div class=wrap wrap=true><h1 class="text-landing text-shadow text-subtitle animated fadeInDown delay-800">分治&amp;高效排序算法</h1><p class=text-intro>By 重庆市育才中学校 赵康</p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h2>分治</h2><hr><blockquote><p>凡治众如治寡，分数是也 ——《孙子兵法》</p></blockquote><p>解决规模庞大的问题的有效方法之一，就是将其分解为若干规模更小的子问题，再通过递归机制分别求解。</p><p>这种分解持续进行，直到子问题规模缩减至平凡情况。</p><p>这也就是所谓的<strong>分而治之</strong>策略。</p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>生活中的分治</h4><ul class="flexblock gallery"><li><a><figure><img src=https://img.haote.com/upload/news/image/20180629/20180629093356_66271.png alt=""><figcaption><h2>2018世界杯决赛</h2></figcaption></figure></a></li><li><a><figure><img src=https://i.loli.net/2019/10/17/uYtTJF2bNlV4yQU.jpg alt=""><figcaption><h2>中国行政区划</h2></figcaption></figure></a></li><li><a><figure><img src=http://img.599ku.com/element_pic/72/85/97/99/8fb998237bea2fef10d6656113c7c5bb.jpg_w800 alt=""><figcaption><h2>找假币</h2><p>一堆硬币中混入了一个假币（面值均相同），真币和假币仅重量不同</p><p>如何找出假币？</p></figcaption></figure></a></li></ul></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>例1.幂运算</h4><p class="text aligncenter">求 <span class=katex><span class=katex-mathml><math><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup></mrow><annotation encoding=application/x-tex>a^b</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.849108em;></span><span class="strut bottom" style=height:0.849108em;vertical-align:0em;></span><span class="base textstyle uncramped"><span class=mord><span class="mord mathit">a</span><span class=vlist><span style=top:-0.363em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">b</span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span></span></span></span></p><p>第一秒想到：枚举连乘</p><p>但是，当<span class=katex><span class=katex-mathml><math><semantics><mrow><mi>b</mi></mrow><annotation encoding=application/x-tex>b</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.69444em;></span><span class="strut bottom" style=height:0.69444em;vertical-align:0em;></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span>太大的时候,可能会超时！</p><p>什么？有同学觉得b不会很大？理由：<span class=katex><span class=katex-mathml><math><semantics><mrow><mi>b</mi></mrow><annotation encoding=application/x-tex>b</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.69444em;></span><span class="strut bottom" style=height:0.69444em;vertical-align:0em;></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> 太大了那么不就连 <code>long long</code> 也存不下啦</p><p>出题人总有办法来考你： <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>b</mi></mrow><annotation encoding=application/x-tex>b</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.69444em;></span><span class="strut bottom" style=height:0.69444em;vertical-align:0em;></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> 可以设置得很大，又能检查你的程序是否正确， 那就是</p><p class="text aligncenter"><strong>模运算！</strong></p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>请听题：</h4><p class="text aligncenter">求 <span class=katex><span class=katex-mathml><math><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup><mi mathvariant=normal>%</mi><mi>m</mi><mo separator=true>,</mo><mn>0</mn><mo>≤</mo><mi>a</mi><mo separator=true>,</mo><mi>b</mi><mo separator=true>,</mo><mi>m</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding=application/x-tex>a^b\%m, 0 \leq a,b,m\leq 10^9</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.849108em;></span><span class="strut bottom" style=height:1.043548em;vertical-align:-0.19444em;></span><span class="base textstyle uncramped"><span class=mord><span class="mord mathit">a</span><span class=vlist><span style=top:-0.363em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">b</span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mpunct>,</span><span class="mord mathrm">0</span><span class=mrel>≤</span><span class="mord mathit">a</span><span class=mpunct>,</span><span class="mord mathit">b</span><span class=mpunct>,</span><span class="mord mathit">m</span><span class=mrel>≤</span><span class="mord mathrm">1</span><span class=mord><span class="mord mathrm">0</span><span class=vlist><span style=top:-0.363em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">9</span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span></span></span></span></p><p>那么，我们就得换一种思考方式了，有什么办法可以让我们快速有效地求出答案呢？</p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>注意到</h4><p class="text aligncenter">如果b是偶数，那么结果等于</p><p><span class=katex-display><span class=katex><span class=katex-mathml><math><semantics><mrow><msup><mi>a</mi><mrow><mi>b</mi><mi mathvariant=normal>/</mi><mn>2</mn></mrow></msup><mo>∗</mo><msup><mi>a</mi><mrow><mi>b</mi><mi mathvariant=normal>/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding=application/x-tex>a^{b/2}*a^{b/2}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.938em;></span><span class="strut bottom" style=height:0.938em;vertical-align:0em;></span><span class="base displaystyle textstyle uncramped"><span class=mord><span class="mord mathit">a</span><span class=vlist><span style=top:-0.413em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">b</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span><span class=mbin>∗</span><span class=mord><span class="mord mathit">a</span><span class=vlist><span style=top:-0.413em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">b</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span></span></span></span></span></p><p class="text aligncenter">否则，结果等于</p><p><span class=katex-display><span class=katex><span class=katex-mathml><math><semantics><mrow><msup><mi>a</mi><mrow><mi>b</mi><mi mathvariant=normal>/</mi><mn>2</mn></mrow></msup><mo>∗</mo><msup><mi>a</mi><mrow><mi>b</mi><mi mathvariant=normal>/</mi><mn>2</mn></mrow></msup><mo>∗</mo><mi>a</mi></mrow><annotation encoding=application/x-tex>a^{b/2}*a^{b/2}*a</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.938em;></span><span class="strut bottom" style=height:0.938em;vertical-align:0em;></span><span class="base displaystyle textstyle uncramped"><span class=mord><span class="mord mathit">a</span><span class=vlist><span style=top:-0.413em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">b</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span><span class=mbin>∗</span><span class=mord><span class="mord mathit">a</span><span class=vlist><span style=top:-0.413em;margin-right:0.05em;><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">b</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span><span class=baseline-fix><span class="fontsize-ensurer reset-size5 size5"><span style=font-size:0em;>​</span></span>​</span></span></span><span class=mbin>∗</span><span class="mord mathit">a</span></span></span></span></span></p><h4>于是</h4><p class="text aligncenter">如果理解了这点，你有办法设计出高效的算法吗？</p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><div class=content-left><pre class="fadeInRight fast language-textile"><code class=language-textile><span class="token phrase">#include </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iostream</span><span class="token punctuation">></span></span>
<span class="token phrase">#define ll long long
using namespace std;</span>

<span class="token phrase">ll Pow(ll a, ll b)
{
    if(b==0) return 1;
    ll res = Pow(a,b/2);
    res *= res;
    if(b%2==1)
    {
        res *= a;
    }
    return res;
}
</span></code></pre></div><div class=content-right><pre class="fadeInRight fast language-textile"><code class=language-textile><span class="token phrase">int main()
{
    ll a, b;
    cin >> a >> b;
    cout &lt;&lt; Pow(a,b);
    return 0;
}
</span></code></pre></div><h4>试一试，并观察有没有什么问题</h4></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>两个重要的数学原理：</h4><p><span class=katex><span class=katex-mathml><math><semantics><mrow><mo>(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>)</mo><mi mathvariant=normal>%</mi><mi>m</mi><mo>=</mo><mo>(</mo><mi>a</mi><mi mathvariant=normal>%</mi><mi>m</mi><mo>+</mo><mi>b</mi><mi mathvariant=normal>%</mi><mi>m</mi><mo>)</mo><mi mathvariant=normal>%</mi><mi>m</mi></mrow><annotation encoding=application/x-tex>(a+b)\%m = (a\%m+b\%m)\%m</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.75em;></span><span class="strut bottom" style=height:1em;vertical-align:-0.25em;></span><span class="base textstyle uncramped"><span class=mopen>(</span><span class="mord mathit">a</span><span class=mbin>+</span><span class="mord mathit">b</span><span class=mclose>)</span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mrel>=</span><span class=mopen>(</span><span class="mord mathit">a</span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mbin>+</span><span class="mord mathit">b</span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mclose>)</span><span class="mord mathrm">%</span><span class="mord mathit">m</span></span></span></span> -- 联系“X天后星期几”</p><p><span class=katex><span class=katex-mathml><math><semantics><mrow><mo>(</mo><mi>a</mi><mo>∗</mo><mi>b</mi><mo>)</mo><mi mathvariant=normal>%</mi><mi>m</mi><mo>=</mo><mo>(</mo><mi>a</mi><mi mathvariant=normal>%</mi><mi>m</mi><mo>∗</mo><mi>b</mi><mi mathvariant=normal>%</mi><mi>m</mi><mo>)</mo><mi mathvariant=normal>%</mi><mi>m</mi></mrow><annotation encoding=application/x-tex>(a*b)\%m = (a\%m*b\%m)\%m</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=strut style=height:0.75em;></span><span class="strut bottom" style=height:1em;vertical-align:-0.25em;></span><span class="base textstyle uncramped"><span class=mopen>(</span><span class="mord mathit">a</span><span class=mbin>∗</span><span class="mord mathit">b</span><span class=mclose>)</span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mrel>=</span><span class=mopen>(</span><span class="mord mathit">a</span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mbin>∗</span><span class="mord mathit">b</span><span class="mord mathrm">%</span><span class="mord mathit">m</span><span class=mclose>)</span><span class="mord mathrm">%</span><span class="mord mathit">m</span></span></span></span> -- 可由上式推导</p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><div class=content-left><pre class="fadeInRight fast language-textile"><code class=language-textile><span class="token phrase">#include </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iostream</span><span class="token punctuation">></span></span>
<span class="token phrase">#define ll long long
using namespace std;</span>

<span class="token phrase">ll Pow(ll a, ll b, ll m)
{
    if(b==0) return 1;
    ll res = Pow(a,b/2, m);
    res = res*res%m;
    if(b%2==1)
    {
        res = res*a%m;
    }
    return res;
}
</span></code></pre></div><div class=content-right><pre class="fadeInRight fast language-textile"><code class=language-textile><span class="token phrase">int main()
{
    ll a, b, m;
    cin >> a >> b >> m;
    cout &lt;&lt; Pow(a,b,m);
    return 0;
}
</span></code></pre></div><h4>动手实践 <a href=http://62.234.125.87/problem/2051104 target=_blank>快速幂</a></h4></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>例2. 汉诺塔II</h4><blockquote><p>汉诺塔（又称河内塔）是源于印度一个古老传说的益智玩具...</p></blockquote><blockquote><p>第一根柱子上串了n片黄金圆盘，从上到下依次编号为 1~n。已知移动第 i 号圆盘的时候需要花费 i 点体力。</p></blockquote><blockquote><p>请问把圆盘全部移动到第二根柱子上，</p></blockquote><blockquote><p>①最小移动次数是多少？</p></blockquote><blockquote><p>②最少消耗的体力是多少？</p></blockquote></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>你是怎麽做的？</h4></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>解汉诺塔的基本思路</h4><pre class=language-textile><code class=language-textile><span class="token phrase">移动N个盘子:
    移动N-1个盘子
    移动1个盘子
    移动N-1个盘子
</span></code></pre></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><p>容易得出：</p><pre class=language-textile><code class=language-textile><span class="token phrase">移动N个盘子的次数 = 
    移动N<span class="token inline"><span class="token punctuation">-</span><span class="token deleted">1个盘子的次数 <span class="token inline"><span class="token punctuation">+</span><span class="token inserted"> 1 </span><span class="token punctuation">+</span></span> 移动N</span><span class="token punctuation">-</span></span>1个盘子的次数
</span></code></pre><p>请尝试写出程序</p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><p>应该这样写吗？</p><pre class=language-textile><code class=language-textile><span class="token phrase">ll f(ll n)
{
    if(n==1) return 1;
    return f(n<span class="token inline"><span class="token punctuation">-</span><span class="token deleted">1) <span class="token inline"><span class="token punctuation">+</span><span class="token inserted"> 1 </span><span class="token punctuation">+</span></span> f(n</span><span class="token punctuation">-</span></span>1);
}
</span></code></pre></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><p>还是这样写呢？</p><pre class=language-textile><code class=language-textile><span class="token phrase">ll f(ll n)
{
    if(n==1) return 1;
    return f(n-1)*2 + 1;
}
</span></code></pre></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>同理：</h4><pre class=language-textile><code class=language-textile><span class="token phrase">移动N个盘子的体力 = 
    ？ <span class="token inline"><span class="token punctuation">+</span><span class="token inserted"> ？ </span><span class="token punctuation">+</span></span> ？
</span></code></pre><p>请尝试写出程序</p><p>动手实践:: <a href=http://62.234.125.87/problem/1051105 target=_blank>汉诺塔II</a></p></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>小结 ：</h4><blockquote><p>分治，即分而治之</p></blockquote><pre class=language-textile><code class=language-textile><span class="token phrase">1.把问题划分成子问题。</span>

<span class="token phrase">2.递归解决子问题。</span>

<span class="token phrase">3.合并子问题的解 -> 得到原问题的解。
</span></code></pre><h4>启示 ：</h4><blockquote><p>在算法的世界里，避免重复计算，本身就是优化！</p></blockquote></div></section><section slide class="slide bg-apple"><div class=wrap wrap=true><h4>例3.</h4></div></section></article></div><script src=//cdn.staticfile.org/echarts/4.1.0-release/echarts.min.js></script><script src=background.js></script><script>window.pluginsOptions = {}



document.addEventListener('DOMContentLoaded', () => {
    let isPrintMode = false;
    if(~location.search.indexOf('print-pdf')){
        isPrintMode = true;
        WebSlides.registerPlugin('scroll', function(){});
    }
    const ws = new WebSlides({
        loop: false
    })
    window.wsInstance = ws;
    if(isPrintMode){
        ws.slides.forEach(s=>s.show())
    }
}, false)</script><script src=./js/chunk-vendors.0b779e0b.js></script><script src=./js/分治.0990b2ab.js></script></body></html>